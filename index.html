<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Restart Schools</title>
    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lato:300i,400,400i,700,900" rel="stylesheet">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/main.css" type="text/css">
    <!-- d3 -->
    <!-- <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script> -->
    <script src="js/d3.v4.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="https://d3js.org/d3-queue.v2.min.js"></script>
    <script src="data/restart-schools.geojson"></script>
    
    <script src="data/basic_data.js"></script>
   
    


    <!-- custom styles -->
    <link rel="stylesheet" href="css/main.css" type="text/css">

    <style>
    
    </style>

  </head>
  <body>
      <div class="container-fluid" style="margin:0;">
          <div class="row">
            <div class="col-lg-12" style="padding:0;">
              <img src="images/header.jpg" alt="" style="width:100%;">
            </div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-lg-offset-2">
                <p style="margin-top:20px;">THIS IS A COMPELLING LEDE. Donec euismod metus vel sem viverra, nec dignissim purus fringilla. Donec suscipit congue nunc, sit amet ultricies mi vestibulum dapibus. Ut et consectetur eros. Phasellus turpis nibh, placerat a neque sed, blandit aliquam quam. Vivamus hendrerit malesuada luctus. Nulla gravida orci non fringilla elementum. Praesent nisi metus, vulputate in purus et, pulvinar posuere tellus. Nulla facilisi. Quisque quis orci nec tortor dignissim pharetra ac nec orci. Mauris aliquet, metus id ultrices sagittis, neque dolor efficitur odio, vel ultricies neque elit eu libero. In suscipit libero purus, id rhoncus arcu venenatis in</p>
            </div>
          </div>
         </div>
    <div id="container" class="container">
        <div class="row">
          <div class="col-lg-4 big-text-col">
              <h1 id="waypoint1">Restart Schools Graphic</h1>
            <div class="story text-wrapper">
                <p>There are 103 schools approved for restart status in North Carolina.</p>
              </div>
              <div class="story text-wrapper">
                  <p>Most restart schools are located in <span data-fip="063" class="map-link map-hover-item">Durham</span>, <span class="map-link map-hover-item" data-fip="159">Rowan-Salisbury</span>, and <span data-fip="183" class="map-link map-hover-item">Wake</span>  counties. When adjusted for population, <span data-fip="083" class="map-link map-hover-item">Weldon City Public Schools</span> in Halifax County has the highest proportion of students in restart schools, with about 67 percent of their students in restart schools.</p>
                  <p>Top 10 Counties with Most Restart Schools</p>
                    <table class="table percent-table">
                      <tr>
                        <th>School district</th>
                        <th>Percent of students in restart schools</th>
                      </tr>
                      <tr data-fip="083" class="map-hover-item">
                        <td>Weldon City (located in Halifax County)</td>
                        <td>66.9%</td>
                      </tr>
                      <tr data-fip="187" class="map-hover-item">
                        <td>Washington</td>
                        <td>50</td>
                      </tr>
                      <tr data-fip="083" class="map-hover-item">
                        <td>Halifax County</td>
                        <td>49.1</td>
                      </tr>
                      <tr data-fip="159" class="map-hover-item">
                        <td>Rowan-Salisbury</td>
                        <td>40.2</td>
                      </tr>
                      <tr data-fip="131" class="map-hover-item">
                        <td>Northampton County</td>
                        <td>26</td>
                      </tr>
                      <tr data-fip="063" class="map-hover-item">
                        <td>Durham</td>
                        <td>25</td>
                      </tr>
                      <tr data-fip="015" class="map-hover-item">
                        <td>Bertie</td>
                        <td>20.3</td>
                      </tr>
                      <tr data-fip="139" class="map-hover-item">
                        <td>Elizabeth City/Pasquotank</td>
                        <td>17</td>
                      </tr>
                      <tr data-fip="037" class="map-hover-item">
                        <td>Chatham</td>
                        <td>14.1</td>
                      </tr>
                      <tr data-fip="025" data-fip2="159" class="map-hover-item">
                        <td>Kannapolis City (in Cabarrus and Rowan counties)</td>
                        <td>41.3</td>
                      </tr>
                    </table>
                    <p id="waypoint2"></p>
              </div>
      
              <div class="story text-wrapper" style="margin-bottom:200px;">
                  <p>(Explanation of how school performance grades work)</p>
                      <p>The median school performance grade (SPG) of restart schools in the past three school years is 47. The median SPG of all schools in the state in the past three schools years is 62.</p>
              </div>
              <div id="waypoint3"></div>
              <div class="story text-wrapper">
                  <p>show: a bar graph like the one in my original sketch showing racial/ethnic breakdown, but with two sets of bars to compare statewide vs restart
                      text: (some sentence describing an interesting pullout from this data)</p>
              </div>
              
              <div id="waypoint4" class="story text-wrapper">
                  <p>The percentage of economically disadvantaged students is reported by the state in ranges: 

                      (Draw an svg line showing the ranges)
                      </p>
              </div>
              <div id="waypoint5" class="story text-wrapper" >
                  <p> The median percentage of economically disadvantaged students in the state is between 60 and 65 percent.
                      
                      (Highlight this range on the line)
                  </p>
              </div>

              <div id="waypoint6" class="text-wrapper" style="margin-bottom:500px;">
                <p>The median percentage of economically disadvantaged students in restart schools is greater than 90%.</p>
              </div>

            </div><!--.col-lg-4-->
            <div class="col-lg-8">
                <div id="schools-map" class="story">
                  <svg></svg>
                </div>
                <div id="line-chart" class="story" style="display:none;">
                    <svg width="960" height="500"></svg>
                  </div>
                <div id="bar-chart" class="story" style="display:none;">
                    <svg width="400" height="200"></svg>
                </div>
                <div id="scale1">
                <img src="images/scale-01.png" alt="" style="width:800px;display:none;">
              </div>
              <div id="scale2">
                  <img src="images/scale-02.png" alt="" style="width:800px;display:none;">
                </div>
            </div>
           
            
          </div><!--row -->
         
  </div><!--container-->

  <hr id="waypoint6">
  <div class="flex-center">
    <h1>Explore individual schools</h1>
  </div>



  <div class="container">
      <div class="row">
        <div class="col-lg-4" id="school-list">
          <h1>list of schools</h1>
        </div>
        <div class="col-lg-8">
          <div class="approved-on">

          </div>
        </div>
      </div>  
  </div>

  <!-- <div class="container-fluid">
    <div class="row">
      div.col-lg-
    </div>
  </div> -->


      <script type="text/javascript" src="js/d3-maps.js"></script>

       
<script type="text/javascript">
$(document).ready(function(){
      //WAYPOINTS
            var waypoint = new Waypoint({
              element: document.getElementById('waypoint1'),
              handler: function() {
                $('#schools-map svg').toggleClass("fixed");
                
              }
            })

            //trigger the line chart
            var waypoint = new Waypoint({
              element: document.getElementById('waypoint2'),
              handler: function() {
                $('#line-chart').toggleClass("inline-block");
                $('#schools-map svg').toggleClass("fixed");
                $('#line-chart svg').toggleClass("fixed");
                
              }
            })

            //trigger the bar chart
            var waypoint = new Waypoint({
              element: document.getElementById('waypoint3'),
              handler: function() {
                $('#line-chart').toggleClass("inline-block");
                $('#bar-chart').toggleClass("inline-block");
                $('#line-chart svg').toggleClass("fixed");
                $('#bar-chart svg').toggleClass("fixed");
                
              }
            })

            var waypoint = new Waypoint({
              element: document.getElementById('waypoint4'),
              handler: function() {
               
                $('#bar-chart').toggleClass("inline-block");
                $('#scale1 img').toggleClass("inline-block");
                $('#scale1 img').toggleClass("fixed");
                $('#bar-chart svg').toggleClass("fixed");
                
              }
            })

            var waypoint = new Waypoint({
              element: document.getElementById('waypoint5'),
              handler: function() {
                $('#scale1 img').toggleClass("inline-block");
                $('#scale1 img').toggleClass("fixed");
                $('#scale2 img').toggleClass("inline-block");
                $('#scale2 img').toggleClass("fixed");
                
              }
            })

            var waypoint = new Waypoint({
              element: document.getElementById('waypoint6'),
              handler: function() {
                $('#scale2 img').toggleClass("inline-block");
                $('#scale2 img').toggleClass("fixed");
                
              }
            })


            $('.map-hover-item').hover(function(e){
              var thisFip = $(this).data('fip');
              if ($(this).data('fip2') != null){
                thisFip2 = $(this).data('fip2');
                $('.fip_' + thisFip2).toggleClass('county-highlight');
              }
              console.log("fip_" + thisFip);

              $('.fip_' + thisFip).toggleClass('county-highlight');

            });

            //POPULATE THE TABLE THING
            for (i in ALL_DATA) {
              var school = ALL_DATA[i];

              $('#school-list').append('<p>' + school.official_school_name + '</p>');
            }

        }); //doc ready
       

    </script>
        <!-- waypoints -->
        <script src="js/jquery.waypoints.min.js"></script>

    </body>
    </html>