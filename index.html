<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Restart Schools</title>
  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300i,400,400i,700,900" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Merriweather:300,400" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="css/main.css" type="text/css">
  <!-- d3 -->
  <!-- <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script> -->
  <script src="js/d3.v4.min.js" charset="utf-8"></script>
  <script src="https://d3js.org/topojson.v1.min.js"></script>
  <script src="https://d3js.org/d3-queue.v2.min.js"></script>


  <script src="data/restart-schools.geojson"></script>
  <script src="data/basic_data.js"></script>
  <script src="data/all_spg.js"></script>

  <!-- font awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">

  <!-- custom styles -->
  <link rel="stylesheet" href="css/main.css" type="text/css">


</head>

<body>
    <!-- <input id="inp_school" type="text">
     -->

  <!-- <header>
    <img src="images/header.jpg" alt="">
    <p style="margin-top:20px;">THIS IS A COMPELLING LEDE. Donec euismod metus vel sem viverra, nec dignissim purus fringilla. Donec suscipit congue nunc,
        sit amet ultricies mi vestibulum dapibus. Ut et consectetur eros. Phasellus turpis nibh, placerat a neque sed, blandit
        aliquam quam. Vivamus hendrerit malesuada luctus. Nulla gravida orci non fringilla elementum. Praesent nisi metus, vulputate
        in purus et, pulvinar posuere tellus. Nulla facilisi. Quisque quis orci nec tortor dignissim pharetra ac nec orci. Mauris
        aliquet, metus id ultrices sagittis, neque dolor efficitur odio, vel ultricies neque elit eu libero. In suscipit libero
        purus, id rhoncus arcu venenatis in</p>
      </header> -->
  <div id="top-explorer">
    
    <!-- <div id="top-sidebar"> -->
        <div>
            <h1 id="waypoint1">Restart Schools Graphic</h1>
            <p>There are 103 schools approved for restart status in North Carolina.</p>
          </div>
          <div id="schools-map">
              <svg viewbox="0 100 960 300"></svg>
          </div>
          <div id="waypoint1a">
            <p>Most restart schools are located in
              <span data-fip="063" class="map-link map-hover-item">Durham</span>,
              <span class="map-link map-hover-item" data-fip="159">Rowan-Salisbury</span>, and
              <span data-fip="183" class="map-link map-hover-item">Wake</span> counties. When adjusted for population,
              <span data-fip="083" class="map-link map-hover-item">Weldon City Public Schools</span> in Halifax County has the highest proportion of students in restart schools, with
              about 67 percent of their students in restart schools.</p>
            <!-- <div id="table-map-wrap"> -->
            <div id="percent-table-wrapper">
                <h3>Percentage of students in restart schools by county
                    <span class="table-instr">Hover or click on a table row to see that county on the map.</span>
                </h3>
            <table class="table percent-table">   
              <tr>
                <th class="table-text">School district</th>
                <th class="table-text percent-students">Percent</th>
              </tr>
              <tr data-fip="083" class="map-hover-item">
                <td class="table-text">Weldon City (located in Halifax County)</td>
                <td class="table-num">67%</td>
              </tr>
              <tr data-fip="187" class="map-hover-item">
                <td class="table-text">Washington</td>
                <td class="table-num">50</td>
              </tr>
              <tr data-fip="083" class="map-hover-item">
                <td class="table-text">Halifax County</td>
                <td class="table-num">49</td>
              </tr>
              <tr data-fip="025" data-fip2="159" class="map-hover-item">
                  <td class="table-text">Kannapolis City (in Cabarrus and Rowan counties)</td>
                  <td class="table-num">41</td>
                </tr>
              <tr data-fip="159" class="map-hover-item">
                <td class="table-text">Rowan-Salisbury</td>
                <td class="table-num">40</td>
              </tr>
              <tr data-fip="131" class="map-hover-item">
                <td class="table-text">Northampton County</td>
                <td class="table-num">26</td>
              </tr>
              <tr data-fip="063" class="map-hover-item">
                <td class="table-text">Durham</td>
                <td class="table-num">25</td>
              </tr>
              <tr data-fip="015" class="map-hover-item">
                <td class="table-text">Bertie</td>
                <td class="table-num">20</td>
              </tr>
              <tr data-fip="139" class="map-hover-item">
                <td class="table-text">Elizabeth City/Pasquotank</td>
                <td class="table-num">17</td>
              </tr>
              <tr data-fip="037" class="map-hover-item">
                <td class="table-text">Chatham</td>
                <td class="table-num">14</td>
              </tr>
            </table>
          </div>
          <!-- <div id="highlight-map">
              <svg width="960" height="500"></svg>
          </div> -->
            <p id="waypoint2"></p>
           
          <!-- </div> -->
          <!--#table-map-wrap-->
         
        </div>
        <!--#waypoint1a-->
        
          <div>
            <p>(Explanation of how school performance grades work)</p>
            </div>
            <!-- <div id="line-chart">
                <svg width="960" height="500"></svg>
              </div>
               -->
            <div>
            <p>The median school performance grade (SPG) of restart schools in the past three school years is 47. The median SPG of
              all schools in the state in the past three schools years is 62.</p>
          </div>
          <div id="waypoint3"></div>
          <div>
            <p>show: a bar graph like the one in my original sketch showing racial/ethnic breakdown, but with two sets of bars to compare
              statewide vs restart text: (some sentence describing an interesting pullout from this data)</p>
          </div>
          <div id="bar-chart" class="story">
              <svg id="bar-1" width="400" height="200"></svg>
              <svg id="bar-2" width="400" height="200"></svg>
            </div>
        
        
          <div id="waypoint4">
            <p>The percentage of economically disadvantaged students is reported by the state in ranges: (Draw an svg line showing the
              ranges)
            </p>
          </div>
          <div id="scale1">
          </div>
            
          <div id="waypoint5">
            <p> The median percentage of economically disadvantaged students in the state is between 60 and 65 percent. (Highlight this
              range on the line)
            </p>
          </div>
          <div id="scale2">
          </div>
        
          <div id="waypoint6">
            <p>The median percentage of economically disadvantaged students in restart schools is greater than 90%.</p>
          </div>
    <!-- </div> -->

</div><!--/#top-explorer-->
  <hr id="waypoint6">

  <div id="bottom-title-wrapper">
     
     
  </div>
  
<div id="bottom-explorer">


  <!-- <div class="flex-center">
    <h1>Explore individual schools</h1>
  </div> -->
  <h3 class="bottom-header">Explore individual schools</h3>
  <!-- <div id="the-basics">
      <input class="typeahead form-control" type="text" placeholder="Schools">
    </div> -->


  <div id="data-list"></div>

</div> <!--/#bottom-explorer -->


<script src="js/typeahead.jquery.min.js"></script>
  <script type="text/javascript" src="js/calc.js"></script>


  <script type="text/javascript">
    $(document).ready(function () {

      var substringMatcher = function(strs) {
        return function findMatches(q, cb) {
          var matches, substringRegex;

          // an array that will be populated with substring matches
          matches = [];

          // regex used to determine if a string contains the substring `q`
          substrRegex = new RegExp(q, 'i');

          // iterate through the pool of strings and for any string that
          // contains the substring `q`, add it to the `matches` array
          $.each(strs, function(i, str) {
            if (substrRegex.test(str)) {
              matches.push(str);
            }
          });

          cb(matches);
        };
      };

      var schools = [];

      for (i in ALL_DATA){
        schools.push(ALL_DATA[i].official_school_name);
      }

      $('#the-basics .typeahead').typeahead({
        hint: true,
        highlight: true,
        minLength: 1
      },
      {
        name: 'schools',
        source: substringMatcher(schools)
      });

      $('#the-basics .typeahead').change(function(){
        console.log($(this).val())
      })


    }); //doc ready


  </script>
  <!-- waypoints -->
  <script src="js/jquery.waypoints.min.js"></script>

</body>

</html>